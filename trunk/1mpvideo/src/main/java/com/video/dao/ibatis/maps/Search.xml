<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="keyword">
	<typeAlias alias="keyword" type="com.video.domain.SystemKeyword" />
	<typeAlias alias="keywordTerm"
		type="com.video.domain.SystemKeywordTerm" />
	<resultMap id="keyword" class="keyword">
		<result column="id" property="id" jdbcType="BIGINT" />
		<result column="name" property="name" jdbcType="VARCHAR" />
		<result column="before_yesterday" property="beforeYesterday"
			jdbcType="INTEGER" />
		<result column="yesterday" property="yesterday"
			jdbcType="INTEGER" />
		<result column="today" property="today" jdbcType="INTEGER" />
		<result column="view_times" property="viewTimes"
			jdbcType="INTEGER" />
		<result column="channel_id" property="channelId"
			jdbcType="BIGINT" />
	</resultMap>
	<select id="getSystemKeywordById" resultMap="keyword"
		parameterClass="java.lang.Long">
		select id, name, before_yesterday, yesterday, today, view_times,
		channel_id from w_keywords where id = #id:INTEGER# order by
		view_times
	</select>
	<select id="getSystemKeywordWithForeFront" resultMap="keyword"
		parameterClass="keywordTerm">
		select id, name, before_yesterday, yesterday, today, view_times,
		channel_id from w_keywords where channel_id = #id:INTEGER# order
		by view_times desc limit 0,#size#
	</select>
	<select id="getSystemKeywordByChannelId" resultMap="keyword"
		parameterClass="java.lang.Long">
		select id, name, before_yesterday, yesterday, today, view_times,
		channel_id from w_keywords where channel_id = #id:INTEGER#
	</select>
	<delete id="deleteSystemKeyword" parameterClass="java.lang.Long">
		delete from w_keywords where id = #id:INTEGER#
	</delete>
	<delete id="deleteSystemKeywordByChannelId"
		parameterClass="java.lang.Long">
		delete from w_keywords where channel_id = #channelId#;
	</delete>
	<insert id="createSystemKeyword" parameterClass="keyword">
		insert into w_keywords (name, before_yesterday, yesterday,
		today, view_times, channel_id) values ( #name:VARCHAR#,
		#beforeYesterday:INTEGER#, #yesterday:INTEGER#, #today:INTEGER#,
		#viewTimes:INTEGER#, #channelId:BIGINT#)
		<selectKey keyProperty="id">select last_insert_id()</selectKey>
	</insert>
	<update id="updateSystemKeyword" parameterClass="keyword">
		update w_keywords set name = #name:VARCHAR#, before_yesterday =
		#beforeYesterday:INTEGER#, yesterday = #yesterday:INTEGER#,
		today = #today:INTEGER#, view_times = #viewTimes:INTEGER#,
		channel_id = #channelId:BIGINT# where id = #id:INTEGER#
	</update>
</sqlMap>